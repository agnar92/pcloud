<!doctype html>
<html lang="en">
<head>
  <meta http-equiv="Content-Security-Policy" content="default-src 'self' file: data:; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' file: data:; connect-src *; media-src *;">

  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>pc_cloud — Kiosk</title>
  <meta name="theme-color" content="#0b0b0d">
  <link rel="icon" href="./assets/icon-192.png" sizes="192x192">
  <link rel="apple-touch-icon" href="./assets/icon-192.png">

  <link rel="stylesheet" href="./css/styles.css">
</head>
<body>
  <div id="app">
    <video id="v" autoplay playsinline muted></video>

    <button id="gear" title="Settings" aria-label="Settings">
      <svg viewBox="0 0 24 24" fill="none"><path d="M12 15.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7Z" stroke="currentColor" stroke-width="1.6"/><path d="M19.4 15a7.97 7.97 0 0 0 .05-6l1.9-1.6-2-3.4-2.4.8a8 8 0 0 0-4.1-1.7L12 1H8l-.8 2.1A8 8 0 0 0 3 4l-2.4-.8-2 3.4L.5 8.2a8 8 0 0 0 0 7.6l-1.9 1.6 2 3.4L3 20a8 8 0 0 0 4.1 1.7L8 24h4l.8-2.1A8 8 0 0 0 17 20l2.4.8 2-3.4L19.4 15Z" stroke="currentColor" stroke-width="1" opacity=".3"/></svg>
    </button>

    <div id="panel" aria-hidden="true">
      <div id="phdr">
        <h3>Settings</h3>
        <span class="hint">Discover a server and connect</span>
      </div>
      <div id="pbody">
        <!-- <div class="sec"  id="serverSec">
          <h4>Server</h4>
          <div class="row">
            <label>Recent/Found</label>
            <select id="serverList"></select>
          </div>
          <div class="row">
            <label>Add server</label>
            <input id="serverInput" type="text" placeholder="http://192.168.1.10:8080"/>
            <button id="addServer" class="btn">Add</button>
          </div>
          <div class="row">
            <label>Scan /24</label>
            <input id="scanPrefix" type="text" value="192.168.1"/>
            <input id="scanPort" type="number" value="8080" style="max-width:100px"/>
            <button id="scanBtn" class="btn">Discover</button>
          </div>
          <div id="scanLog" class="hint">Idle</div>
          <div id="found" class="list" style="display:none"></div>
        </div> -->
      <div id="serverSection" class="section">
          <h3>SERVER</h3>
          <!-- Readonly widok (pokazywany gdy ?server=... ) -->
          <div id="serverReadonly" class="row" style="display:none;align-items:center;gap:8px">
            <span>Using</span>
            <span id="lockedServer" class="pill"></span>
          </div>
          <!-- Legacy UI (ukrywany gdy ?server=... ) -->
          <div id="serverManage">
            <!-- tu zostają Twoje istniejące kontrolki: Recent/Found, Add server, Scan/Discover -->
            ...
          </div>
      </div>
        <div class="sec">
          <h4>Video</h4>
          <div class="row">
            <label>Codec</label>
            <select id="codec">
              <option value="h264">H.264</option>
              <option value="hevc">HEVC</option>
              <option value="av1" selected>AV1</option>
            </select>
          </div>
          <div class="row">
            <label>FPS</label>
            <input id="fps" type="number" min="10" max="240" step="5" value="60"/>
          </div>
          <div class="row">
            <label>Resolution</label>
            <input id="width" type="number" min="0" step="2" placeholder="0 (native)" style="max-width:110px">
            <span>×</span>
            <input id="height" type="number" min="0" step="2" placeholder="0 (native)" style="max-width:110px">
            <select id="resQuick" style="max-width:140px">
              <option value="">— quick —</option>
              <option value="1280x720">1280×720</option>
              <option value="1920x1080">1920×1080</option>
              <option value="2560x1440">2560×1440</option>
              <option value="0x0">native</option>
            </select>
          </div>
          <div class="row">
            <label>Preset (NVENC)</label>
            <select id="preset">
              <option>p2</option><option selected>p4</option><option>p5</option><option>p6</option><option>p7</option>
            </select>
          </div>
          <div class="row">
            <label>Bitrate</label>
            <input id="bitrate" type="number" min="5" max="200" step="5" value="20" style="max-width:120px">
            <span class="hint">Mbit/s</span>
          </div>
          <div class="row">
            <label>Capture (Win)</label>
            <select id="capture">
              <option value="">auto (ddagrab)</option>
              <option value="ddagrab">ddagrab</option>
              <option value="gdigrab">gdigrab</option>
            </select>
          </div>
        </div>

        <div class="sec">
          <h4>Audio</h4>
          <div class="row">
            <label>Enable</label>
            <select id="audio">
              <option value="1" selected>on</option>
              <option value="0">off</option>
            </select>
          </div>
          <div class="row">
            <label>Device (Windows)</label>
            <input id="adev" type="text" value="Wtyczka do wewnętrznego złącza AUX (Steam Streaming Speakers)">
          </div>
        </div>

        <div class="sec">
          <h4>Actions</h4>
          <div class="row">
            <button id="connect" class="btn primary">Connect</button>
            <button id="end" class="btn warn">End session</button>
          </div>
          <div class="row">
            <label></label>
            <div class="hint" id="status">Not connected</div>
          </div>
        </div>

        <div id="gp-toolbar"></div>

        <div class="sec">
          <h4>Display tweaks (CSS)</h4>
          <div class="row"><label>Fit</label>
            <select id="fit"><option>contain</option><option>cover</option><option>fill</option></select>
          </div>
          <div class="row"><label>Scale %</label>
            <input id="scale" type="range" min="50" max="200" step="5" value="100"><span id="scalev">100</span>
          </div>
          <div class="row"><label>Contrast</label>
            <input id="contrast" type="range" min="0.8" max="1.5" step="0.02" value="1.10"><span id="contrastv">1.10</span>
          </div>
          <div class="row"><label>Saturation</label>
            <input id="saturate" type="range" min="0.8" max="1.4" step="0.02" value="1.10"><span id="saturatev">1.10</span>
          </div>
          <div class="row"><label>Brightness</label>
            <input id="bright" type="range" min="0.9" max="1.2" step="0.02" value="1.00"><span id="brightv">1.00</span>
          </div>
        </div>
      </div>
    </div>

    <div id="hud">
    <button id="fsBtn">Fullscreen</button>
    <button id="exitBtn">exit</button>
    <div id="stats">fps:- jitter:- br:-kB</div>
    </div>
  </div>

  <script type="module" src="./js/app.js"></script>
</body>
</html>
